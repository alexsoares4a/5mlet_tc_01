<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tech Challenge - Fase 1 - P√≥s-Tech Machine Learning Engineering</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/icomoon-social.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,600,800' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/static/css/leaflet.css" />
    <!--[if lte IE 8]>
		    <link rel="stylesheet" href="/static/css/leaflet.ie.css" />
		<![endif]-->
    <link rel="stylesheet" href="/static/css/main.css">

    <script src="/static/js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>

<body>
    <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


    <!-- Navigation & Logo-->
    <div class="mainmenu-wrapper">
        <div class="container">
            <nav id="mainmenu" class="mainmenu">
                <ul>
                    <li class="logo-wrapper"><a href="index.html"><img src="/static/img/pos-tech-logo.png"
                                alt="Pos Tech"></a></li>
                    <li><a href="/static/index.html">Home</a></li>
                    <li><a href="/static/page-tecnologias.html">Tecnologias</a></li>
                    <li class="active"><a href="/static/page-arquitetura.html">Arquitetura</a></li>
                    <li><a href="/static/page-documentacao.html">Documenta√ß√£o da API</a></li>
                    <li><a href="/static/page-machine-learning.html">API e Machine Learning</a></li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- Page Title -->
    <div class="section section-breadcrumbs">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1>üç∑ Tech Challenge - Fase 1 - Machine Learning Engineering</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <!-- Job Description -->
                    <div class="job-details-wrapper">
                        <h3>Arquitetura da VitiBrasil API: Fluxo de Dados</h3>
                        <p>
                            A VitiBrasil API foi projetada com uma arquitetura clara e modular para garantir efici√™ncia
                            e resili√™ncia na entrega de dados da vitivinicultura. A seguir, detalhamos o fluxo completo
                            do sistema, desde a requisi√ß√£o do cliente at√© o retorno dos dados, seja via web scraping ou
                            fallback local.
                        </p>
                        <!-- Diagrama Visual -->
                        <div class="well text-center">
                            <img src="/static/img/arquitetura_api.png" alt="Diagrama da Arquitetura"
                                class="img-responsive center-block" style="max-width: 100%; height: auto;">
                            <p><em>Diagrama do fluxo do sistema</em></p>
                        </div>

                        <hr />

                        <h3>‚ö° API REST ‚Äì O Orquestrador Central</h3>
                        <p>Constru√≠da com FastAPI, a API REST atua como o orquestrador central do sistema. Ela √©
                            respons√°vel por:</p>
                        <ul>
                            <li>Receber e processar as requisi√ß√µes dos clientes.</li>
                            <li>Realizar a autentica√ß√£o de usu√°rios via token JWT.</li>
                            <li>Gerenciar a l√≥gica de raspagem de dados ou acionar o mecanismo de fallback.</li>
                            <li>Retornar as respostas em formato JSON padronizado.</li>
                            <li>Oferecer documenta√ß√£o autom√°tica e interativa via Swagger UI.</li>
                        </ul>

                        <hr />

                        <h3>üë§ Intera√ß√£o do Cliente</h3>
                        <p>O acesso √† VitiBrasil API inicia-se com a intera√ß√£o do cliente, que segue um fluxo de
                            seguran√ßa:</p>
                        <ul>
                            <li><strong>Cadastro:</strong> Novos usu√°rios registram-se atrav√©s da rota
                                <code>/register</code>.
                            </li>
                            <li><strong>Login:</strong> Ap√≥s o cadastro, o usu√°rio realiza o login via
                                <code>/login</code> para obter um token JWT.
                            </li>
                            <li><strong>Consumo da API:</strong> O token JWT √© ent√£o utilizado nas requisi√ß√µes √†s rotas
                                protegidas, enviado no cabe√ßalho <code>Authorization: Bearer &lt;token&gt;</code>.</li>
                        </ul>

                        <hr />
                        <h3>üíæ Banco de Dados ‚Äì Persist√™ncia de Usu√°rios</h3>
                        <p>O sistema utiliza SQLite para a persist√™ncia de dados de usu√°rios registrados. Gerenciado
                            pelo SQLAlchemy ORM, o banco de dados armazena:</p>
                        <ul>
                            <li>Informa√ß√µes de cadastro: nome, e-mail, senha (hash) e status de ativa√ß√£o.</li>
                            <li>√â importante notar que este banco de dados √© exclusivo para a gest√£o de usu√°rios e n√£o
                                armazena cache dos dados da Embrapa.</li>
                        </ul>

                        <hr />

                        <h3>üîê Autentica√ß√£o ‚Äì Seguran√ßa com JWT</h3>
                        <p>A seguran√ßa das rotas protegidas √© garantida pelo uso de JSON Web Tokens (JWT). Este processo
                            envolve:</p>
                        <ul>
                            <li>Armazenamento seguro dos dados do usu√°rio no banco de dados SQLite.</li>
                            <li>Gera√ß√£o de um token JWT ap√≥s um login bem-sucedido.</li>
                            <li>Valida√ß√£o do token por um middleware (<code>get_current_user</code>) em cada requisi√ß√£o
                                a rotas protegidas, assegurando que apenas usu√°rios autorizados tenham acesso.</li>
                        </ul>

                        <hr />

                        <h3>üïµÔ∏è‚Äç‚ôÇÔ∏è Raspagem de Dados ‚Äì Coleta Direta da Fonte</h3>
                        <p>A coleta de dados da Embrapa √© realizada atrav√©s de web scraping, utilizando a biblioteca
                            BeautifulSoup. O processo funciona da seguinte forma:</p>
                        <ul>
                            <li>Uma rota da API invoca a fun√ß√£o <code>scrape_embrapa()</code>.</li>
                            <li>Esta fun√ß√£o executa requisi√ß√µes HTTP ao site da Embrapa e extrai as tabelas HTML
                                relevantes.</li>
                            <li>Os dados s√£o ent√£o processados e retornados no formato JSON estruturado.</li>
                        </ul>

                        <hr />

                        <h3>üìÅ Fallback Local ‚Äì Garantia de Disponibilidade</h3>
                        <p>Para assegurar a continuidade do servi√ßo mesmo em caso de instabilidade do site da Embrapa,
                            um mecanismo de fallback local foi implementado:</p>
                        <ul>
                            <li>Se a tentativa de web scraping falhar, o sistema automaticamente busca os dados em
                                arquivos CSV armazenados localmente.</li>
                            <li>Os dados s√£o carregados com a biblioteca Pandas e retornados no mesmo formato JSON,
                                mantendo a consist√™ncia da resposta da API.</li>
                            <li>Este recurso √© vital para a resili√™ncia da API e para a valida√ß√£o do projeto em
                                ambientes offline.</li>
                        </ul>

                        <hr />

                        <h3>üìö Documenta√ß√£o ‚Äì Swagger UI Interativo</h3>
                        <p>A documenta√ß√£o da API √© gerada automaticamente pelo FastAPI, oferecendo uma interface
                            interativa via Swagger UI:</p>
                        <ul>
                            <li>Acess√≠vel na rota <code>/docs</code>.</li>
                            <li>Permite testar os endpoints diretamente no navegador.</li>
                            <li>Inclui um bot√£o "Authorize" para inserir o token JWT, facilitando os testes de rotas
                                protegidas.</li>
                            <li>Exibe modelos de requisi√ß√£o/resposta e poss√≠veis c√≥digos de erro, agilizando o consumo
                                da API por desenvolvedores.</li>
                        </ul>
                    </div>
                    <!-- End Job Description -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-footer col-md-12 col-xs-6">
                    <h3>Informa√ß√µes do Projeto</h3>
                    <p class="contact-us-details">
                        <b>Aluno:</b> Alex Soares da Silva<br />
                        <b>Curso:</b> P√≥s Tech ‚Äì Machine Learning Engineering<br />
                        <b>Turma:</b> 5MLET<br />
                        <b>Institui√ß√£o:</b> FIAP ‚Äì Faculdade de Inform√°tica e Administra√ß√£o Paulista
                    </p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="footer-copyright">&copy; 2013 mPurpose. All rights reserved.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Javascripts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.9.1.min.js"><\/script>')</script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.js"></script>
    <script src="/static/js/jquery.fitvids.js"></script>
    <script src="/static/js/jquery.sequence-min.js"></script>
    <script src="/static/js/jquery.bxslider.js"></script>
    <script src="/static/js/main-menu.js"></script>
    <script src="/static/js/template.js"></script>
</body>

</html>
