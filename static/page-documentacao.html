<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Tech Challenge - Fase 1 - P√≥s-Tech Machine Learning Engineering</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/icomoon-social.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,600,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/static/css/leaflet.css" />
	<!--[if lte IE 8]>
		    <link rel="stylesheet" href="/static/css/leaflet.ie.css" />
		<![endif]-->
	<link rel="stylesheet" href="/static/css/main.css">

	<script src="/static/js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>

<body>
	<!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


	<!-- Navigation & Logo-->
	<div class="mainmenu-wrapper">
		<div class="container">
			<nav id="mainmenu" class="mainmenu">
				<ul>
					<li class="logo-wrapper"><a href="index.html"><img src="/static/img/pos-tech-logo.png"
								alt="Pos Tech"></a></li>
					<li><a href="/static/index.html">Home</a></li>
					<li><a href="/static/page-tecnologias.html">Tecnologias</a></li>
					<li><a href="/static/page-arquitetura.html">Arquitetura</a></li>
					<li class="active"><a href="/static/page-documentacao.html">Documenta√ß√£o da API</a></li>
				</ul>
			</nav>
		</div>
	</div>

	<!-- Page Title -->
	<div class="section section-breadcrumbs">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h1>üç∑ Tech Challenge - Fase 1 - Machine Learning Engineering</h1>
				</div>
			</div>
		</div>
	</div>

	<div class="section">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<!-- Job Description -->
					<div class="job-details-wrapper">
                        <h3>üìö Documenta√ß√£o da API</h3>
                        <p>
                            Este documento apresenta a documenta√ß√£o completa da API REST desenvolvida para o Tech Challenge da Fase 01 do curso de P√≥s-Tech em Machine Learning Engineering.
                        </p>

                        <hr />

                        <h3>üß≠ Vis√£o Geral da API</h3>
                        <p>
                            A <strong>VitiBrasil API</strong> foi desenvolvida para extrair dados do site da Embrapa sobre vitivinicultura, incluindo Produ√ß√£o, Processamento, Comercializa√ß√£o, Importa√ß√£o e Exporta√ß√£o. A API √© segura, usa autentica√ß√£o JWT e est√° dispon√≠vel publicamente.
                        </p>
                        <p>
                            Para facilitar o uso e consumo dos dados, a API gera automaticamente uma interface interativa atrav√©s do Swagger UI, acess√≠vel via:
                            <a href="/docs" target="_blank">http://127.0.0.1:8000/docs</a>
                        </p>

                        <hr />

                        <h3>üìã Endpoints Dispon√≠veis</h3>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Rota</th>
                                    <th>M√©todo</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>/register</td>
                                    <td>POST</td>
                                    <td>Cria um novo usu√°rio na API</td>
                                </tr>
                                <tr>
                                    <td>/login</td>
                                    <td>POST</td>
                                    <td>Gera um token JWT v√°lido para acesso √†s rotas protegidas</td>
                                </tr>
                                <tr>
                                    <td>/logout</td>
                                    <td>POST</td>
                                    <td>Encerra a sess√£o do usu√°rio (cliente-side)</td>
                                </tr>
                                <tr>
                                    <td>/delete-user</td>
                                    <td>DELETE</td>
                                    <td>Exclui permanentemente a conta do usu√°rio</td>
                                </tr>
                                <tr>
                                    <td>/producao/{ano}</td>
                                    <td>GET</td>
                                    <td>Retorna dados de produ√ß√£o vitivin√≠cola para o ano informado</td>
                                </tr>
                                <tr>
                                    <td>/processamento/{tipo}/{ano}</td>
                                    <td>GET</td>
                                    <td>Retorna dados de processamento por tipo de uva e ano</td>
                                </tr>
                                <tr>
                                    <td>/comercializacao/{ano}</td>
                                    <td>GET</td>
                                    <td>Retorna dados de comercializa√ß√£o vin√≠cola para o ano especificado</td>
                                </tr>
                                <tr>
                                    <td>/importacao/{produto}/{ano}</td>
                                    <td>GET</td>
                                    <td>Retorna dados de importa√ß√£o por tipo de produto e ano</td>
                                </tr>
                                <tr>
                                    <td>/exportacao/{produto}/{ano}</td>
                                    <td>GET</td>
                                    <td>Retorna dados de exporta√ß√£o por tipo de produto e ano</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr />

                        <h3>üîÅ Fluxo B√°sico para Testar a VitiBrasil API no Swagger</h3>
                        <ol>
                            <li><i class="icon-user-add"></i> Cadastro de usu√°rio</li>
                            <li><i class="icon-enter"></i> Login e obten√ß√£o do token JWT</li>
                            <li><i class="icon-lock-open"></i> Autoriza√ß√£o via bot√£o "Authorize"</li>
                            <li><i class="icon-beaker"></i> Teste das rotas protegidas</li>
                            <li><i class="icon-refresh"></i> Verifica√ß√£o do funcionamento com fallback local (opcional)</li>
                        </ol>

                        <hr />

                        <h3>üßë‚Äçüíª 1. Cadastro ‚Äì Rota /register</h3>
                        <p>Para acessar as rotas da API, √© necess√°rio criar uma conta. Siga os passos abaixo:</p>
                        <ul>
                            <li>Acesse a rota <code>/register</code> no Swagger;</li>
                            <li>Clique no bot√£o <strong>"Try it out"</strong>;</li>
                            <li>No campo <strong>Request body</strong>, preencha os campos:</li>
                        </ul>
                        <pre>
{
  "username": "seu_usuario",
  "email": "usuario@example.com",
  "password": "sua_senha_segura"
}
                        </pre>
                        <ul>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li>O resultado esperado ser√°:</li>
                        </ul>
                        <pre>
{
  "message": "Usu√°rio registrado com sucesso!"
}
                        </pre>
                        <p><strong>‚úÖ Observa√ß√£o:</strong> Nesta vers√£o, o token JWT n√£o √© retornado aqui ‚Äî ele ser√° gerado apenas ap√≥s o login.</p>

                        <hr />

                        <h3>üîê 2. Login ‚Äì Rota /login</h3>
                        <p>Ap√≥s o cadastro, realize login para obter seu token JWT:</p>
                        <ul>
                            <li>Acesse a rota <code>/login</code> no Swagger;</li>
                            <li>Clique em <strong>"Try it out"</strong>;</li>
                            <li>Preencha os campos:</li>
                        </ul>
                        <pre>
username: seu_usuario
password: sua_senha_segura
                        </pre>
                        <ul>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li>O resultado esperado ser√°:</li>
                        </ul>
                        <pre>
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx",
  "token_type": "bearer"
}
                        </pre>
                        <p><strong>üîí Importante:</strong></p>
                        <ul>
                            <li>Salve o token JWT em um lugar seguro;</li>
                            <li>Ele ser√° usado nas pr√≥ximas etapas para acessar rotas protegidas;</li>
                            <li>O token tem validade de <strong>30 minutos</strong>.</li>
                        </ul>

                        <hr />

                        <h3>üö™ 3. Autoriza√ß√£o ‚Äì Bot√£o "Authorize"</h3>
                        <p>Na interface do Swagger, localize o bot√£o <strong>"Authorize"</strong> no canto superior direito.</p>
                        <ul>
                            <li>Clique nele;</li>
                            <li>Cole o token JWT no campo:</li>
							<li>Preencha os campos:</li>
                        </ul>
                        <pre>
username: seu_usuario
password: sua_senha_segura
                        </pre>
                        <ul>
                            <li>Clique em <strong>"Authorize"</strong>;</li>
                            <li>Depois, clique em <strong>"Close"</strong> para retornar √† interface principal.</li>
                        </ul>
                        <p><strong>‚úÖ Agora voc√™ pode testar todas as rotas protegidas com autentica√ß√£o autom√°tica!</strong></p>

                        <hr />

                        <h3>üõ†Ô∏è 4. Testando as Rotas Protegidas da API</h3>
                        <p>As rotas de consulta est√£o protegidas com autentica√ß√£o JWT. Certifique-se de ter inserido o token antes de test√°-las.</p>
                        <hr />
                        <h4>üç∑ 4.1. Produ√ß√£o ‚Äì Rota /producao/{ano}</h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de produ√ß√£o de vinhos, sucos e derivados para o ano informado;</li>
                            <li><strong>Filtros dispon√≠veis:</strong> Ano entre <code>1970</code> e <code>2023</code>;</li>
                            <li><strong>Colunas retornadas:</strong> <code>produto</code>, <code>quantidade</code> (em litros).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ul>
                            <li>Acesse a rota <code>/producao/{ano}</code>;</li>
                            <li>Clique em <strong>"Try it out"</strong>;</li>
                            <li>Preencha o campo <strong>ano</strong> (ex: <code>2023</code>);</li>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li><strong>Resultado esperado:</strong></li>
                        </ul>
                        <pre>
[
  {"produto": "Vinho Tinto", "quantidade": "146075996"},
  {"produto": "Vinho Branco", "quantidade": "26432799"}
]
                        </pre>

                        <hr />

                        <h4>üçá 4.2. Processamento ‚Äì Rota /processamento/{tipo}/{ano}</h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de quantidade de uvas processadas no Rio Grande do Sul, separados por tipo de uva e ano;</li>
                            <li><strong>Tipos de uva:</strong>
                                <ul>
                                    <li><code>subopt_01</code>: Uvas Vin√≠feras</li>
                                    <li><code>subopt_02</code>: Uvas Americanas e H√≠bridas</li>
                                    <li><code>subopt_03</code>: Uvas de Mesa</li>
                                    <li><code>subopt_04</code>: Uvas Sem Classifica√ß√£o</li>
                                </ul>
                            </li>
                            <li><strong>Filtro:</strong> Ano entre <code>1970</code> e <code>2023</code>.</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ul>
                            <li>Acesse a rota <code>/processamento/{tipo}/{ano}</code>;</li>
                            <li>Clique em <strong>"Try it out"</strong>;</li>
                            <li>Preencha:
                                <ul>
                                    <li><code>tipo</code>: ex: <code>subopt_01</code> (Uvas Vin√≠feras)</li>
                                    <li><code>ano</code>: ex: <code>2023</code></li>
                                </ul>
                            </li>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li><strong>Resultado esperado:</strong></li>
                        </ul>
                        <pre>
[
  {"produto": "Cabernet Sauvignon", "quantidade": "1000000"},
  {"produto": "Merlot", "quantidade": "800000"}
]
                        </pre>

                        <hr />

                        <h4>üç∑ 4.3. Comercializa√ß√£o ‚Äì Rota /comercializacao/{ano}</h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de comercializa√ß√£o de produtos vin√≠colas no Rio Grande do Sul para o ano informado;</li>
                            <li><strong>Filtros:</strong> Ano entre <code>1970</code> e <code>2023</code>;</li>
                            <li><strong>Colunas retornadas:</strong> <code>produto</code>, <code>quantidade</code> (em litros).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ul>
                            <li>Acesse a rota <code>/comercializacao/{ano}</code>;</li>
                            <li>Clique em <strong>"Try it out"</strong>;</li>
                            <li>Preencha o campo <strong>ano</strong> (ex: <code>2023</code>);</li>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li><strong>Resultado esperado:</strong></li>
                        </ul>
                        <pre>
[
  {"produto": "Vinho Tinto", "quantidade": "12000000"},
  {"produto": "Espumante", "quantidade": "1500000"}
]
                        </pre>

                        <hr />

                        <h4>üåç 4.4. Importa√ß√£o ‚Äì Rota /importacao/{produto}/{ano}</h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de importa√ß√£o de derivados de uva por tipo de produto e ano;</li>
                            <li><strong>Tipos de produto:</strong>
                                <ul>
                                    <li><code>subopt_01</code>: Vinhos de mesa</li>
                                    <li><code>subopt_02</code>: Espumantes</li>
                                    <li><code>subopt_03</code>: Uvas frescas</li>
                                    <li><code>subopt_04</code>: Uvas passas</li>
                                    <li><code>subopt_05</code>: Suco de uva</li>
                                </ul>
                            </li>
                            <li><strong>Filtro:</strong> Ano entre <code>1970</code> e <code>2023</code>;</li>
                            <li><strong>Colunas retornadas:</strong> <code>pais</code>, <code>quantidade</code> (kg), <code>valor_usd</code> ($).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ul>
                            <li>Acesse a rota <code>/importacao/{produto}/{ano}</code>;</li>
                            <li>Clique em <strong>"Try it out"</strong>;</li>
                            <li>Preencha:
                                <ul>
                                    <li><code>produto</code>: ex: <code>subopt_05</code> (suco de uva)</li>
                                    <li><code>ano</code>: ex: <code>2023</code></li>
                                </ul>
                            </li>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li><strong>Resultado esperado:</strong></li>
                        </ul>
                        <pre>
[
  {"pais": "Argentina", "quantidade": "500000", "valor_usd": "100000"},
  {"pais": "It√°lia", "quantidade": "300000", "valor_usd": "60000"}
]
                        </pre>

                        <hr />

                        <h4>üåé 4.5. Exporta√ß√£o ‚Äì Rota /exportacao/{produto}/{ano}</h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de exporta√ß√£o de derivados de uva por tipo de produto e ano;</li>
                            <li><strong>Tipos de produto:</strong>
                                <ul>
                                    <li><code>subopt_01</code>: Vinhos de mesa</li>
                                    <li><code>subopt_02</code>: Espumantes</li>
                                    <li><code>subopt_03</code>: Uvas frescas</li>
                                    <li><code>subopt_04</code>: Suco de uva</li>
                                </ul>
                            </li>
                            <li><strong>Filtro:</strong> Ano entre <code>1970</code> e <code>2023</code>;</li>
                            <li><strong>Colunas retornadas:</strong> <code>pais</code>, <code>quantidade</code> (kg), <code>valor_usd</code> ($).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ul>
                            <li>Acesse a rota <code>/exportacao/{produto}/{ano}</code>;</li>
                            <li>Clique em <strong>"Try it out"</strong>;</li>
                            <li>Preencha:
                                <ul>
                                    <li><code>produto</code>: ex: <code>subopt_04</code> (suco de uva)</li>
                                    <li><code>ano</code>: ex: <code>2023</code></li>
                                </ul>
                            </li>
                            <li>Clique em <strong>"Execute"</strong>;</li>
                            <li><strong>Resultado esperado:</strong></li>
                        </ul>
                        <pre>
[
  {"pais": "Estados Unidos", "quantidade": "200000", "valor_usd": "80000"},
  {"pais": "Fran√ßa", "quantidade": "100000", "valor_usd": "40000"}
]
                        </pre>

                        <hr />

                        <h3>üîÑ Fallback Local</h3>
                        <p>Se o site da Embrapa estiver fora do ar:</p>
                        <ul>
                            <li>A API tentar√° primeiro buscar os dados ao vivo;</li>
                            <li>Se falhar, ela usar√° os arquivos CSV armazenados localmente;</li>
                            <li>O formato da resposta ser√° o mesmo, garantindo disponibilidade cont√≠nua.</li>
                        </ul>
                        <p><strong>üìå Exemplo de uso do fallback:</strong></p>
                        <ul>
                            <li>Site da Embrapa inacess√≠vel;</li>
                            <li>A API carrega dados de <code>csv/Producao.csv</code>, <code>csv/ProcessamentoViniferas.csv</code>, etc.;</li>
                            <li>Resposta JSON igual √†quela obtida ao vivo.</li>
                        </ul>

                        <hr />

                        <h3>‚ö†Ô∏è Tratamento de Erros Comuns</h3>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Solu√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>401 Unauthorized</td>
                                    <td>Token JWT inv√°lido ou ausente</td>
                                    <td>Use o bot√£o "Authorize" para inserir o token novamente</td>
                                </tr>
                                <tr>
                                    <td>400 Bad Request</td>
                                    <td>Dados inv√°lidos no registro ou filtros incorretos</td>
                                    <td>Verifique se os campos est√£o corretos e dentro dos valores permitidos</td>
                                </tr>
                                <tr>
                                    <td>404 Not Found</td>
                                    <td>Ano ou tipo de produto n√£o encontrado no site ou no CSV</td>
                                    <td>Confira se o ano e o tipo est√£o entre os valores v√°lidos</td>
                                </tr>
                                <tr>
                                    <td>500 Internal Server Error</td>
                                    <td>Erro no servidor ou instabilidade do site da Embrapa</td>
                                    <td>Verifique o log e tente novamente mais tarde</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr />

                        <h3>üìå Dicas Finais</h3>
                        <ul>
                            <li><strong>Bot√£o Authorize:</strong> Use-o para inserir o token JWT e usar todas as rotas protegidas;</li>
                            <li><strong>Anos v√°lidos:</strong> Todos os anos v√£o de <code>1970</code> at√© <code>2023</code>;</li>
                            <li><strong>Subop√ß√µes:</strong> Os tipos de produto (<code>subopt_01</code>, <code>subopt_02</code>, etc.) seguem o padr√£o do site da Embrapa;</li>
                            <li><strong>Fallback local:</strong> Caso o site esteja fora do ar, a API retorna dados de CSV armazenados localmente;</li>
                            <li><strong>Token expirado:</strong> O token JWT expira ap√≥s 30 minutos ‚Äî fa√ßa login novamente se for necess√°rio continuar os testes.</li>
                        </ul>

					</div>	
					<!-- End Job Description -->
				</div>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<div class="footer">
		<div class="container">
			<div class="row">
				<div class="col-footer col-md-4 col-xs-6">
					<h3>Dados do Aluno</h3>
					<p class="contact-us-details">
						<b>Nome:</b> Alex Soares da Silva<br />
						<b>Linkedin:</b> <a href="//www.linkedin.com/in/alexsoares4a/"
							target="_blank">alexsoares4a</a><br />
						<b>Email:</b> <a
							href="mailto:getintoutch@yourcompanydomain.com">getintoutch@yourcompanydomain.com</a>
					</p>
				</div>
			</div>
			<div class="row">
				<div class="col-md-12">
					<div class="footer-copyright">&copy; 2013 mPurpose. All rights reserved.</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Javascripts -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
	<script>window.jQuery || document.write('<script src="js/jquery-1.9.1.min.js"><\/script>')</script>
	<script src="/static/js/bootstrap.min.js"></script>
	<script src="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.js"></script>
	<script src="/static/js/jquery.fitvids.js"></script>
	<script src="/static/js/jquery.sequence-min.js"></script>
	<script src="/static/js/jquery.bxslider.js"></script>
	<script src="/static/js/main-menu.js"></script>
	<script src="/static/js/template.js"></script>
</body>

</html>
