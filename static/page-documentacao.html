<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Tech Challenge - Fase 1 - P√≥s-Tech Machine Learning Engineering</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">

    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/icomoon-social.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,600,800' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" href="/static/css/leaflet.css" />
    <!--[if lte IE 8]>
		    <link rel="stylesheet" href="/static/css/leaflet.ie.css" />
		<![endif]-->
    <link rel="stylesheet" href="/static/css/main.css">

    <script src="/static/js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>

<body>
    <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


    <!-- Navigation & Logo-->
    <div class="mainmenu-wrapper">
        <div class="container">
            <nav id="mainmenu" class="mainmenu">
                <ul>
                    <li class="logo-wrapper"><a href="index.html"><img src="/static/img/pos-tech-logo.png"
                                alt="Pos Tech"></a></li>
                    <li><a href="/static/index.html">Home</a></li>
                    <li><a href="/static/page-tecnologias.html">Tecnologias</a></li>
                    <li><a href="/static/page-arquitetura.html">Arquitetura</a></li>
                    <li class="active"><a href="/static/page-documentacao.html">Documenta√ß√£o da API</a></li>
                    <li><a href="/static/page-machine-learning.html">API e Machine Learning</a></li>
                </ul>
            </nav>
        </div>
    </div>

    <!-- Page Title -->
    <div class="section section-breadcrumbs">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h1>üç∑ Tech Challenge - Fase 1 - Machine Learning Engineering</h1>
                </div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <!-- Job Description -->
                    <div class="job-details-wrapper">
                        <h3>Documenta√ß√£o Interativa da VitiBrasil API</h3>
                        <p>Este documento serve como guia completo para a VitiBrasil API, desenvolvida para o Tech
                            Challenge - Fase 1 do curso de P√≥s-Tech em Machine Learning Engineering. Aqui voc√™
                            encontrar√° todas as informa√ß√µes necess√°rias para consumir e interagir com a API.</p>

                        <hr />

                        <h3>üß≠ Vis√£o Geral da API</h3>
                        <p>
                        <p>A VitiBrasil API foi criada para extrair e disponibilizar dados de vitivinicultura do site da
                            Embrapa (Produ√ß√£o, Processamento, Comercializa√ß√£o, Importa√ß√£o e Exporta√ß√£o). Para garantir a
                            seguran√ßa, todas as rotas de extra√ß√£o de dados s√£o protegidas por autentica√ß√£o JWT. A API
                            oferece uma interface interativa para testes e explora√ß√£o via Swagger UI, acess√≠vel em
                            <a href="/docs" target="_blank">/docs</a>.
                        </p>

                        <hr />

                        <h3>üìã Endpoints Dispon√≠veis</h3>
                        <table class="table table-striped">
                            <thead>
                                <tr>
                                    <th>Rota</th>
                                    <th>M√©todo</th>
                                    <th>Descri√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>/register</code></td>
                                    <td><code>POST</code></td>
                                    <td>Cria um novo usu√°rio na API.</td>
                                </tr>
                                <tr>
                                    <td><code>/login</code></td>
                                    <td><code>POST</code></td>
                                    <td>Gera um token JWT v√°lido para acesso √†s rotas protegidas.</td>
                                </tr>
                                <tr>
                                    <td><code>/logout</code></td>
                                    <td><code>POST</code></td>
                                    <td>Encerra a sess√£o do usu√°rio (a√ß√£o cliente-side).</td>
                                </tr>
                                <tr>
                                    <td><code>/delete-user</code></td>
                                    <td><code>DELETE</code></td>
                                    <td>Exclui permanentemente a conta do usu√°rio.</td>
                                </tr>
                                <tr>
                                    <td><code>/producao/{ano}</code></td>
                                    <td><code>GET</code></td>
                                    <td>Retorna dados de produ√ß√£o vitivin√≠cola para o ano informado.</td>
                                </tr>
                                <tr>
                                    <td><code>/processamento/{tipo}/{ano}</code></td>
                                    <td><code>GET</code></td>
                                    <td>Retorna dados de processamento por tipo de uva e ano.</td>
                                </tr>
                                <tr>
                                    <td><code>/comercializacao/{ano}</code></td>
                                    <td><code>GET</code></td>
                                    <td>Retorna dados de comercializa√ß√£o vin√≠cola para o ano especificado.</td>
                                </tr>
                                <tr>
                                    <td><code>/importacao/{produto}/{ano}</code></td>
                                    <td><code>GET</code></td>
                                    <td>Retorna dados de importa√ß√£o por tipo de produto e ano.</td>
                                </tr>
                                <tr>
                                    <td><code>/exportacao/{produto}/{ano}</code></td>
                                    <td><code>GET</code></td>
                                    <td>Retorna dados de exporta√ß√£o por tipo de produto e ano.</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr />

                        <h3>üîÅ Fluxo B√°sico para Testar a VitiBrasil API no Swagger</h3>
                        <ol>
                            <li><strong>Cadastro de usu√°rio:</strong> Crie sua conta para acesso.</li>
                            <li><strong>Login e obten√ß√£o do token JWT:</strong> Autentique-se para receber seu token de
                                acesso.</li>
                            <li><strong>Autoriza√ß√£o via bot√£o "Authorize":</strong> Insira o token no Swagger para
                                habilitar as rotas protegidas.</li>
                            <li><strong>Teste das rotas protegidas:</strong> Explore e teste os endpoints de dados.</li>
                            <li><strong>Verifica√ß√£o do funcionamento com fallback local (opcional):</strong> Entenda
                                como a API se comporta em caso de instabilidade da fonte original.</li>
                        </ol>

                        <hr />

                        <h3>üßë‚Äçüíª 1. Cadastro ‚Äì Rota <code>/register</code></h3>
                        <p>Para acessar as rotas protegidas da API, o primeiro passo √© criar uma conta. Siga os passos
                            abaixo na interface do Swagger:</p>
                        <ol>
                            <li>Acesse a rota <code>/register</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>Na se√ß√£o "Request body", preencha os campos com suas informa√ß√µes:
                                <pre><code>{
  "username": "seu_usuario",
  "email": "usuario@example.com",
  "password": "sua_senha_segura"
}</code></pre>
                            </li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>{
  "message": "Usu√°rio registrado com sucesso!"
}</code></pre>
                            </li>
                        </ol>

                        <hr />

                        <h3>üîê 2. Login ‚Äì Rota <code>/login</code></h3>
                        <p>Ap√≥s o cadastro, realize o login para obter seu token JWT, essencial para acessar as rotas
                            protegidas:</p>
                        <ol>
                            <li>Acesse a rota <code>/login</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>Na se√ß√£o "Request body", preencha os campos:
                                <pre><code>username: seu_usuario
password: sua_senha_segura</code></pre>
                            </li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.xxxxx",
  "token_type": "bearer"
}</code></pre>
                            </li>
                        </ol>
                        <p><strong>üîí Importante:</strong> O token JWT obtido ser√° utilizado nas pr√≥ximas etapas para
                            acessar rotas protegidas e possui validade de 30 minutos.</p>

                        <hr />

                        <h3>üö™ 3. Autoriza√ß√£o ‚Äì Bot√£o "Authorize"</h3>
                        <p>Para que o Swagger envie o token JWT automaticamente nas suas requisi√ß√µes, voc√™ precisa
                            autoriz√°-lo:</p>
                        <ol>
                            <li>Na interface do Swagger, localize e clique no bot√£o "Authorize" (canto superior
                                direito).</li>
                            <li>Na tela "Available authorizations", preencha os campos com seu <strong>username</strong>
                                e <strong>password</strong>.</li>
                            <li>Clique no bot√£o "Authorize".</li>
                            <li>Em seguida, clique no bot√£o "Close" para retornar √† interface principal.</li>
                        </ol>
                        <p><strong>‚úÖ Agora voc√™ poder√° testar todas as rotas protegidas com autentica√ß√£o
                                autom√°tica!</strong></p>

                        <hr />

                        <h3>üõ†Ô∏è 4. Testando as Rotas Protegidas da API</h3>
                        <p>As rotas de consulta de dados da Embrapa s√£o protegidas por autentica√ß√£o JWT. Abaixo,
                            detalhamos como testar cada uma delas.</p>

                        <h4>üç∑ 4.1. Produ√ß√£o ‚Äì Rota <code>/producao/{ano}</code></h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de produ√ß√£o de vinhos, sucos e derivados para
                                o ano informado.</li>
                            <li><strong>Filtros dispon√≠veis:</strong> Ano entre 1970 e 2023.</li>
                            <li><strong>Colunas retornadas:</strong> <code>produto</code>, <code>quantidade</code> (em
                                litros).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ol>
                            <li>Acesse a rota <code>/producao/{ano}</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>No campo "ano", preencha com o ano desejado (ex: <code>2023</code>).</li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>[
  {"produto": "Vinho Tinto", "quantidade": "146075996"},
  {"produto": "Vinho Branco", "quantidade": "26432799"}
]</code></pre>
                            </li>
                        </ol>

                        <h4>üçá 4.2. Processamento ‚Äì Rota <code>/processamento/{tipo}/{ano}</code></h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de quantidade de uvas processadas no Rio
                                Grande do Sul, separados por tipo de uva e ano.</li>
                            <li><strong>Filtros dispon√≠veis:</strong>
                                <ul>
                                    <li><code>tipo</code>:
                                        <ul>
                                            <li><code>subopt_01</code> (Uvas Vin√≠feras),</li>
                                            <li><code>subopt_02</code> (Uvas Americanas e H√≠bridas),
                                            </li>
                                            <li><code>subopt_03</code>
                                                (Uvas de Mesa),
                                            </li>
                                            <li><code>subopt_04</code> (Uvas Sem Classifica√ß√£o).
                                            </li>
                                        </ul>
                                    </li>
                                    <li><code>ano</code>: Ano entre 1970 e 2023.</li>
                                </ul>
                            </li>
                            <li><strong>Colunas retornadas:</strong> <code>produto</code>, <code>quantidade</code> (em
                                litros).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ol>
                            <li>Acesse a rota <code>/processamento/{tipo}/{ano}</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>Preencha os campos:
                                <ul>
                                    <li><code>tipo</code>: ex: <code>subopt_01</code> (Uvas Vin√≠feras)</li>
                                    <li><code>ano</code>: ex: <code>2023</code></li>
                                </ul>
                            </li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>[
  {"produto": "Cabernet Sauvignon", "quantidade": "1000000"},
  {"produto": "Merlot", "quantidade": "800000"}
]</code></pre>
                            </li>
                        </ol>

                        <h4>üõí 4.3. Comercializa√ß√£o ‚Äì Rota <code>/comercializacao/{ano}</code></h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de comercializa√ß√£o de produtos vin√≠colas no
                                Rio Grande do Sul para o ano informado.</li>
                            <li><strong>Filtros dispon√≠veis:</strong> Ano entre 1970 e 2023.</li>
                            <li><strong>Colunas retornadas:</strong> <code>produto</code>, <code>quantidade</code> (em
                                litros).</li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ol>
                            <li>Acesse a rota <code>/comercializacao/{ano}</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>No campo "ano", preencha com o ano desejado (ex: <code>2023</code>).</li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>[
  {"produto": "Vinho Tinto", "quantidade": "12000000"},
  {"produto": "Espumante", "quantidade": "1500000"}
]</code></pre>
                            </li>
                        </ol>

                        <h4>üåç 4.4. Importa√ß√£o ‚Äì Rota <code>/importacao/{produto}/{ano}</code></h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de importa√ß√£o de derivados de uva por tipo de
                                produto e ano.</li>
                            <li><strong>Filtros dispon√≠veis:</strong>
                                <ul>
                                    <li><code>produto</code>:
                                        <ul>
                                            <li><code>subopt_01</code> (Vinhos de mesa),</li>
                                            <li><code>subopt_02</code> (Espumantes),</li>
                                            <li><code>subopt_03</code> (Uvas frescas),</li>
                                            <li><code>subopt_04</code> (Uvas passas),</li>
                                            <li><code>subopt_05</code> (Suco de uva).</li>
                                        </ul>
                                    </li>
                                    <li><code>ano</code>: Ano entre 1970 e 2024.</li>
                                </ul>
                            </li>
                            <li><strong>Colunas retornadas:</strong> <code>pais</code>, <code>quantidade</code> (kg),
                                <code>valor_usd</code> ($).
                            </li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ol>
                            <li>Acesse a rota <code>/importacao/{produto}/{ano}</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>Preencha os campos:
                                <ul>
                                    <li><code>produto</code>: ex: <code>subopt_05</code> (suco de uva)</li>
                                    <li><code>ano</code>: ex: <code>2023</code></li>
                                </ul>
                            </li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>[
  {"pais": "Argentina", "quantidade": "500000", "valor_usd": "100000"},
  {"pais": "It√°lia", "quantidade": "300000", "valor_usd": "60000"}
]</code></pre>
                            </li>
                        </ol>

                        <h4>üåé 4.5. Exporta√ß√£o ‚Äì Rota <code>/exportacao/{produto}/{ano}</code></h4>
                        <ul>
                            <li><strong>Descri√ß√£o:</strong> Retorna dados de exporta√ß√£o de derivados de uva por tipo de
                                produto e ano.</li>
                            <li><strong>Filtros dispon√≠veis:</strong>
                                <ul>
                                    <li><code>produto:</code>:
                                        <ul>
                                            <li><code>subopt_01</code> (Vinhos de mesa),</li>
                                            <li><code>subopt_02</code> (Espumantes),</li>
                                            <li><code>subopt_03</code> (Uvas frescas),</li>
                                            <li><code>subopt_04</code> (Suco de uva).</li>
                                        </ul>
                                    </li>
                                    <li><code>ano</code>: Ano entre 1970 e 2024.</li>
                                </ul>
                            </li>
                            <li><strong>Colunas retornadas:</strong> <code>pais</code>, <code>quantidade</code> (kg),
                                <code>valor_usd</code> ($).
                            </li>
                        </ul>
                        <p><strong>üìå Passo a Passo no Swagger:</strong></p>
                        <ol>
                            <li>Acesse a rota <code>/exportacao/{produto}/{ano}</code>.</li>
                            <li>Clique no bot√£o "Try it out".</li>
                            <li>Preencha os campos:
                                <ul>
                                    <li><code>produto</code>: ex: <code>subopt_04</code> (suco de uva)</li>
                                    <li><code>ano</code>: ex: <code>2023</code></li>
                                </ul>
                            </li>
                            <li>Clique no bot√£o "Execute".</li>
                            <li><strong>Resultado esperado:</strong>
                                <pre><code>[
  {"pais": "Estados Unidos", "quantidade": "200000", "valor_usd": "80000"},
  {"pais": "Fran√ßa", "quantidade": "100000", "valor_usd": "40000"}
]</code></pre>
                            </li>
                        </ol>

                        <hr />

                        <h3>üìÅ 5. Fallback Local ‚Äì Resili√™ncia da API</h3>
                        <p>A VitiBrasil API foi projetada para ser resiliente. Se o site da Embrapa estiver inacess√≠vel
                            ou inst√°vel, a API automaticamente recorrer√° a uma fonte de dados local:</p>
                        <ul>
                            <li>A API tentar√° primeiro buscar os dados online.</li>
                            <li>Em caso de falha, ela utilizar√° os arquivos CSV armazenados localmente (ex:
                                <code>csv/Producao.csv</code>, <code>csv/ProcessamentoViniferas.csv</code>, etc.,
                                conforme a rota).
                            </li>
                            <li>O formato da resposta JSON ser√° o mesmo, garantindo a continuidade do servi√ßo e a
                                consist√™ncia para o consumidor da API.</li>
                        </ul>
                        <p><strong>üìå Exemplo de uso do fallback:</strong></p>
                        <p>Se o site da Embrapa estiver inacess√≠vel, a API carregar√° dados de um arquivo CSV local
                            correspondente √† rota escolhida, e a resposta JSON ser√° id√™ntica √†quela obtida online.</p>

                        <hr />

                        <h3>‚ö†Ô∏è Tratamento de Erros Comuns</h3>
                        <table class="table table-bordered">
                            <thead>
                                <tr>
                                    <th>C√≥digo</th>
                                    <th>Descri√ß√£o</th>
                                    <th>Solu√ß√£o</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><code>401 Unauthorized</code></td>
                                    <td>Token JWT inv√°lido ou ausente.</td>
                                    <td>Use o bot√£o "Authorize" para inserir o token novamente ou obtenha um novo token
                                        via <code>/login</code>.</td>
                                </tr>
                                <tr>
                                    <td><code>400 Bad Request</code></td>
                                    <td>Dados inv√°lidos no registro ou filtros incorretos na requisi√ß√£o.</td>
                                    <td>Verifique se os campos est√£o corretos e dentro dos valores permitidos (ex: ano,
                                        tipo de produto).</td>
                                </tr>
                                <tr>
                                    <td><code>404 Not Found</code></td>
                                    <td>Ano ou tipo de produto n√£o encontrado na fonte de dados (site ou CSV).</td>
                                    <td>Confira se o ano e o tipo est√£o entre os valores v√°lidos e dispon√≠veis.</td>
                                </tr>
                                <tr>
                                    <td><code>500 Internal Server Error</code></td>
                                    <td>Erro interno no servidor da API ou instabilidade do site da Embrapa.</td>
                                    <td>Verifique o log da API (se tiver acesso) e tente novamente mais tarde.</td>
                                </tr>
                            </tbody>
                        </table>

                        <hr />
                    </div>
                    <!-- End Job Description -->
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="footer">
        <div class="container">
            <div class="row">
                <div class="col-footer col-md-12 col-xs-6">
					<h3>Informa√ß√µes do Projeto</h3>
					<p class="contact-us-details">
						<b>Aluno:</b> Alex Soares da Silva<br />
						<b>Curso:</b> P√≥s Tech ‚Äì Machine Learning Engineering<br />
						<b>Turma:</b> 5MLET<br />
						<b>Institui√ß√£o:</b> FIAP ‚Äì Faculdade de Inform√°tica e Administra√ß√£o Paulista
					</p>
                </div>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="footer-copyright">&copy; 2013 mPurpose. All rights reserved.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Javascripts -->
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="js/jquery-1.9.1.min.js"><\/script>')</script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script src="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.js"></script>
    <script src="/static/js/jquery.fitvids.js"></script>
    <script src="/static/js/jquery.sequence-min.js"></script>
    <script src="/static/js/jquery.bxslider.js"></script>
    <script src="/static/js/main-menu.js"></script>
    <script src="/static/js/template.js"></script>
</body>

</html>
