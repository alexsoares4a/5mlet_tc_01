<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js"> <!--<![endif]-->

<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<title>Tech Challenge - Fase 1 - P√≥s-Tech Machine Learning Engineering</title>
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width">

	<link rel="stylesheet" href="/static/css/bootstrap.min.css">
	<link rel="stylesheet" href="/static/css/icomoon-social.css">
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,600,800' rel='stylesheet' type='text/css'>

	<link rel="stylesheet" href="/static/css/leaflet.css" />
	<!--[if lte IE 8]>
		    <link rel="stylesheet" href="/static/css/leaflet.ie.css" />
		<![endif]-->
	<link rel="stylesheet" href="/static/css/main.css">

	<script src="/static/js/modernizr-2.6.2-respond-1.1.0.min.js"></script>
</head>

<body>
	<!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->


	<!-- Navigation & Logo-->
	<div class="mainmenu-wrapper">
		<div class="container">
			<nav id="mainmenu" class="mainmenu">
				<ul>
					<li class="logo-wrapper"><a href="index.html"><img src="/static/img/pos-tech-logo.png"
								alt="Pos Tech"></a></li>
					<li><a href="/static/index.html">Home</a></li>
					<li><a href="/static/page-tecnologias.html">Tecnologias</a></li>
					<li><a href="/static/page-arquitetura.html">Arquitetura</a></li>
					<li><a href="/static/page-documentacao.html">Documenta√ß√£o da API</a></li>
					<li class="active"><a href="/static/page-machine-learning.html">API e Machine Learning</a></li>
				</ul>
			</nav>
		</div>
	</div>

	<!-- Page Title -->
	<div class="section section-breadcrumbs">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<h1>üç∑ Tech Challenge - Fase 1 - Machine Learning Engineering</h1>
				</div>
			</div>
		</div>
	</div>

	<div class="section">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<!-- Job Description -->
					<div class="job-details-wrapper">
						<h3>VitiBrasil API: A Base para Modelos de Machine Learning</h3>
						<p>
							A VitiBrasil API foi concebida como uma ponte para o acesso padronizado aos dados da
							Embrapa, facilitando sua ingest√£o por sistemas anal√≠ticos, dashboards e, principalmente,
							modelos de Machine Learning. Esta p√°gina demonstra como coletar esses dados de forma
							automatizada, transformando-os em insumos valiosos para an√°lises preditivas.
						</p>
						<p>Os dados coletados podem ser utilizados para treinar modelos de previs√£o de produ√ß√£o
							vin√≠cola, an√°lise de tend√™ncias de exporta√ß√£o, detec√ß√£o de padr√µes sazonais e muito mais. O
							script abaixo √© um exemplo pr√°tico, execut√°vel em ambientes Python como Jupyter Notebook,
							PyCharm, VS Code ou Google Colab.</p>

						<hr />

						<h3>üìà Como Coletar Dados para Alimentar um Modelo?</h3>
						<p>Para automatizar a coleta de dados hist√≥ricos para seus modelos de Machine Learning, voc√™
							pode integrar requisi√ß√µes √† VitiBrasil API em seus scripts Python, outras APIs ou notebooks
							de an√°lise.</p>

						<hr />

						<h4>üß™ Exemplo Pr√°tico ‚Äì Como Fazer no Jupyter Notebook</h4>
						<p>A seguir, um exemplo funcional de como realizar o login e consumir uma rota protegida da
							VitiBrasil API em um Jupyter Notebook:</p>

						<hr />

						<h4>üì¶ 1. Importe as bibliotecas necess√°rias</h4>
						<p>Este passo prepara o ambiente com as ferramentas essenciais para a comunica√ß√£o com a API REST
							e a transforma√ß√£o dos dados em um formato estruturado (DataFrame).</p>
						<pre><code># Para realizar chamadas HTTP √† API
import requests

# Para carregar os dados em DataFrame e salvar CSV
import pandas as pd</code></pre>

						<hr />

						<h4>üîë 2. Fa√ßa Login e Obtenha o Token JWT</h4>
						<p>Para acessar os dados protegidos, √© necess√°rio estar autenticado. O c√≥digo simula um login
							real via a rota <code>/login</code>, enviando as credenciais para obter um token JWT v√°lido.
						</p>
						<pre><code># URL base da API
API_URL = "https://fivemlet-tc-01.onrender.com/"

# Dados de login do usu√°rio (substitua conforme necess√°rio)
login_data = {
    "username": "seu_usuario",
    "password": "sua_senha"
}

# Faz a requisi√ß√£o POST para /login
response = requests.post(f"{API_URL}/login", data=login_data)

# Verifica se o login foi bem-sucedido
if response.status_code == 200:
    # Extrai o token JWT da resposta
    token = response.json()["access_token"]
    print("Login bem-sucedido!")
    print("Token JWT:", token)
else:
    print("Erro ao fazer login:", response.text)</code></pre>

						<hr />

						<h4>üõ°Ô∏è 3. Use o Token nas Rotas Protegidas</h4>
						<p>Com o token em m√£os, ele deve ser inclu√≠do no cabe√ßalho <code>Authorization</code> de todas
							as requisi√ß√µes √†s rotas protegidas. Isso permite consumir os dados diretamente da Embrapa
							(ou do fallback local, se o site estiver inst√°vel).</p>
						<pre><code># Define os cabe√ßalhos com o token Bearer para autentica√ß√£o
headers = {
    "Authorization": f"Bearer {token}"
}</code></pre>

						<hr />

						<h4>ü§ñ 4. Automatize a Coleta de Dados Hist√≥ricos</h4>
						<p>Este √© o cerne do processo de coleta de dados para ML. O exemplo itera sobre um intervalo de
							anos, acessando a rota <code>/producao/{ano}</code> e agregando os resultados em uma √∫nica
							estrutura de dados.</p>
						<pre><code># Cria uma lista vazia para armazenar todos os dados coletados
dados_totais = []

# Define o intervalo de anos desejado
for ano in range(2014, 2024): # Exemplo: de 2014 a 2023

    url_rota = f"{API_URL}/producao/{ano}"
    
    # Faz a requisi√ß√£o √† API com o token JWT
    response = requests.get(url_rota, headers=headers)

    if response.status_code == 200:
        # Adiciona o ano como campo para an√°lise temporal
        dados = response.json()
        for item in dados:
            item["ano"] = ano # Anexa o ano a cada registro

        dados_totais.extend(dados) # Adiciona os dados coletados √† lista principal
        print(f"Dados de {ano} adicionados.")
    else:
        print(f"Erro ao coletar dados de {ano}: {response.text}")

# Converte os dados coletados em DataFrame e salva como CSV
df_final = pd.DataFrame(dados_totais)
df_final.to_csv("dataset_producao.csv", index=False)
print("Dados salvos em dataset_producao.csv")</code></pre>

						<hr />

						<h3>üí°Onde Usar Esses Dados?</h3>
						<p>O arquivo CSV gerado, ou os dados diretamente consumidos, podem ser aplicados em diversos
							cen√°rios de Machine Learning:</p>
						<table class="table table-striped">
							<thead>
								<tr>
									<th>Cen√°rio de ML</th>
									<th>Rota da API Utilizada</th>
									<th>T√©cnica Recomendada</th>
								</tr>
							</thead>
							<tbody>
								<tr>
									<td>Previs√£o de Produ√ß√£o Vin√≠cola</td>
									<td><code>/producao/{ano}</code></td>
									<td>Regress√£o Linear, Prophet</td>
								</tr>
								<tr>
									<td>Tend√™ncias de Exporta√ß√£o</td>
									<td><code>/exportacao/{produto}/{ano}</code></td>
									<td>S√©ries Temporais, Clusteriza√ß√£o</td>
								</tr>
								<tr>
									<td>Detec√ß√£o de Padr√µes Sazonais</td>
									<td><code>/comercializacao/{ano}</code></td>
									<td>An√°lise Estat√≠stica, Holt-Winters</td>
								</tr>
								<tr>
									<td>Classifica√ß√£o de Pa√≠ses Importadores</td>
									<td><code>/importacao/{produto}/{ano}</code></td>
									<td>KMeans, √Årvores de Decis√£o</td>
								</tr>
							</tbody>
						</table>

						<hr />

						<h3>üîÑ Como Adaptar para Outras Rotas?</h3>
						<p>Voc√™ pode facilmente adaptar este script para gerar datasets completos de Produ√ß√£o,
							Exporta√ß√£o, Importa√ß√£o, Processamento e Comercializa√ß√£o. Basta alterar a rota da API e
							ajustar o tratamento dos campos conforme a estrutura de dados retornada:</p>
						<pre><code># Exemplo para Exporta√ß√£o de vinhos de mesa
url_rota = f"{API_URL}/exportacao/subopt_01/{ano}"
response = requests.get(url, headers=headers)

# Adapte os campos conforme necess√°rio
for item in dados:
    item["ano"] = ano
    item["tipo"] = "vinhos_de_mesa" # Adicione campos espec√≠ficos da rota
</code></pre>
						<p>Ap√≥s a coleta, basta converter os dados para um DataFrame Pandas e salv√°-los como CSV ou
							JSON, prontos para o treinamento do seu modelo de Machine Learning.</p>
						<!-- End Job Description -->
					</div>
				</div>
			</div>
		</div>

		<!-- Footer -->
		<div class="footer">
			<div class="container">
				<div class="row">
					<div class="col-footer col-md-4 col-xs-6">
						<h3>Dados do Aluno</h3>
						<p class="contact-us-details">
							<b>Nome:</b> Alex Soares da Silva<br />
							<b>Linkedin:</b> <a href="//www.linkedin.com/in/alexsoares4a/"
								target="_blank">alexsoares4a</a><br />
							<b>Email:</b> <a
								href="mailto:getintoutch@yourcompanydomain.com">getintoutch@yourcompanydomain.com</a>
						</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-12">
						<div class="footer-copyright">&copy; 2013 mPurpose. All rights reserved.</div>
					</div>
				</div>
			</div>
		</div>

		<!-- Javascripts -->
		<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
		<script>window.jQuery || document.write('<script src="js/jquery-1.9.1.min.js"><\/script>')</script>
		<script src="/static/js/bootstrap.min.js"></script>
		<script src="http://cdn.leafletjs.com/leaflet-0.5.1/leaflet.js"></script>
		<script src="/static/js/jquery.fitvids.js"></script>
		<script src="/static/js/jquery.sequence-min.js"></script>
		<script src="/static/js/jquery.bxslider.js"></script>
		<script src="/static/js/main-menu.js"></script>
		<script src="/static/js/template.js"></script>
</body>

</html>
